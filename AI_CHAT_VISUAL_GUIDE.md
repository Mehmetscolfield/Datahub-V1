# AI Chat Widget - Visual Overview

## ğŸ¨ UI Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  EduGuide KZ                          ğŸŒ™ ğŸŒ         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  Your Page Content Here                            â”‚
â”‚                                                     â”‚
â”‚                                                     â”‚
â”‚                                                     â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                      
                                      â•”â•â•â•â•â•â•â•â•â•â•â•â•â•—
                                      â•‘     â¨¯      â•‘  <- Floating Button
                                      â•‘ (sparkle)  â•‘    in bottom-left
                                      â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•
```

### When Chat is Opened

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  EduGuide KZ                          ğŸŒ™ ğŸŒ         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  Your Page Content                                 â”‚
â”‚                                                     â”‚
â”‚                                                     â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  âœ¨ AI Advisor                              âœ•     â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                    â•‘
â•‘  AI: Hi! Tell me about your academic profile      â•‘
â•‘      and I'll suggest universities...             â•‘
â•‘                                                    â•‘
â•‘  You: I have 6.0 IELTS, 3.5 GPA, Engineering     â•‘
â•‘                                                    â•‘
â•‘  AI: Based on your profile:                       â•‘
â•‘      1. KBTU - Excellent engineering              â•‘
â•‘      2. Kaznu - Strong engineering                â•‘
â•‘      3. Satbayev - Technical specialized          â•‘
â•‘                                                    â•‘
â•‘      Reasoning: Your 6.0 IELTS is sufficient...  â•‘
â•‘                                                    â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  Example: "I have 6.0 IELTS, 3.5 GPA..."        â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘
â•‘  â”‚ Describe your profile...         â”‚  Send   â”‚  â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸ”„ Data Flow

```
                    USER INTERACTIONS
                            â”‚
                            â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  AIChatWidget Component           â”‚
        â”‚  â”œâ”€ isOpen (boolean)              â”‚
        â”‚  â”œâ”€ messages (array)              â”‚
        â”‚  â”œâ”€ input (string)                â”‚
        â”‚  â””â”€ loading (boolean)             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                          â”‚
        â–¼                          â–¼
   User Types          User Presses Send
   "6.0 IELTS..."              â”‚
                               â–¼
                    handleSend() Function
                               â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚              â”‚              â”‚
    Validate    â”‚    Get API Key from    â”‚  Add User
    Input       â”‚    import.meta.env     â”‚  Message
                â”‚                        â”‚  to State
                â”‚                        â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚  Google Gemini API Call     â”‚
                â”‚  POST /generateContent      â”‚
                â”‚  â”œâ”€ System: University data â”‚
                â”‚  â””â”€ User: Profile text      â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                 â”‚
              Response âœ“          Error âœ—
                    â”‚                 â”‚
                    â–¼                 â–¼
            Parse AI Response    Show Error
            Add to Messages      Message
                    â”‚             in Chat
                    â–¼
            Display in Chat
            Panel with
            Auto-scroll
```

---

## ğŸ—ï¸ Component Architecture

```
App.tsx
â”œâ”€â”€ Providers (Query, I18n, Compare, Favorites)
â”‚
â””â”€â”€ AIChatWidget
    â”œâ”€â”€ State Management
    â”‚   â”œâ”€â”€ isOpen
    â”‚   â”œâ”€â”€ messages[]
    â”‚   â”œâ”€â”€ input
    â”‚   â”œâ”€â”€ loading
    â”‚   â””â”€â”€ error
    â”‚
    â”œâ”€â”€ Floating Button
    â”‚   â””â”€â”€ Opens/Closes chat
    â”‚
    â”œâ”€â”€ Chat Panel (when open)
    â”‚   â”œâ”€â”€ Header
    â”‚   â”‚   â”œâ”€â”€ Title (AI Advisor)
    â”‚   â”‚   â””â”€â”€ Close Button
    â”‚   â”‚
    â”‚   â”œâ”€â”€ ScrollArea (Messages)
    â”‚   â”‚   â”œâ”€â”€ AI Messages (left-aligned, light bg)
    â”‚   â”‚   â”œâ”€â”€ User Messages (right-aligned, blue bg)
    â”‚   â”‚   â””â”€â”€ Loading Indicator
    â”‚   â”‚
    â”‚   â”œâ”€â”€ Error Alert (if needed)
    â”‚   â”‚
    â”‚   â””â”€â”€ Input Section
    â”‚       â”œâ”€â”€ Helper Text
    â”‚       â”œâ”€â”€ Input Field
    â”‚       â””â”€â”€ Send Button
    â”‚
    â””â”€â”€ API Integration
        â””â”€â”€ Google Gemini API
            â”œâ”€â”€ System Prompt (University Data)
            â”œâ”€â”€ User Query
            â””â”€â”€ Config (temperature, tokens, etc.)
```

---

## ğŸŒ Language Support

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Language Switcher in Navbar       â”‚
â”‚  â”œâ”€ English                        â”‚
â”‚  â”œâ”€ ÒšĞ°Ğ·Ğ°Ò›ÑˆĞ° (Kazakh)              â”‚
â”‚  â””â”€ Ğ ÑƒÑÑĞºĞ¸Ğ¹ (Russian)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
    useI18n() Hook
        â”‚
    â”Œâ”€â”€â”€â”¼â”€â”€â”€â”
    â”‚   â”‚   â”‚
    â–¼   â–¼   â–¼
   en  kz  ru
    â”‚   â”‚   â”‚
    â””â”€â”€â”€â”¼â”€â”€â”€â”˜
        â–¼
Translation Keys:
â”œâ”€ ai.title
â”œâ”€ ai.chat_placeholder
â”œâ”€ ai.chat_example
â”œâ”€ ai.thinking
â””â”€ ...
```

---

## ğŸ” Security Flow

```
1. Admin Setup (One-time)
   â””â”€ Get API Key from Google
   â””â”€ Add to .env file
   â””â”€ Restart dev server

2. User Session
   â””â”€ Opens chat
   â””â”€ Sends message
   â””â”€ API Key loaded from env (server-side in build)
   â””â”€ API call made with key
   â””â”€ Response shown to user
   â””â”€ Chat history in component memory (lost on page reload)

3. No Local Storage
   â””â”€ No user data saved
   â””â”€ No API key visible to user
   â””â”€ No secrets in code
```

---

## ğŸ“Š Message Types

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Message Interface                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ {                                       â”‚
â”‚   id: string                            â”‚
â”‚   type: "user" | "ai"                   â”‚
â”‚   content: string                       â”‚
â”‚   timestamp: Date                       â”‚
â”‚ }                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Example:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AI Message                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id: "initial"                   â”‚
â”‚ type: "ai"                      â”‚
â”‚ content: "Hi! Tell me about..." â”‚
â”‚ timestamp: 2024-01-28T...       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ User Journey

```
1. User Opens App
   â”‚
   â””â”€ Sees floating sparkle icon in bottom-left
   
2. User Clicks Icon
   â”‚
   â””â”€ Chat panel expands
   â””â”€ Shows greeting message
   
3. User Types Profile
   â”‚
   â””â”€ "I have 6.0 IELTS, 3.5 GPA, Engineering"
   
4. User Presses Send
   â”‚
   â””â”€ Message appears in chat (right side, blue)
   â””â”€ "Thinking..." appears (left side, gray)
   â””â”€ Loading spinner shows
   
5. AI Responds (2-5 seconds)
   â”‚
   â””â”€ "Based on your profile..."
   â””â”€ Lists recommended universities
   â””â”€ Provides reasoning
   
6. User Asks Follow-up (optional)
   â”‚
   â””â”€ Can ask more questions
   â””â”€ Chat history visible
   â””â”€ Can close and reopen widget
   
7. User Closes Chat
   â”‚
   â””â”€ Chat history shown next time they click
   â””â”€ History cleared on page reload
```

---

## ğŸ”„ API Request/Response Cycle

### Request
```json
{
  "contents": [{
    "parts": [
      {
        "text": "You are an expert university advisor...\n\nUniversities:\nKBTU (Almaty): 45 programs...\n..."
      },
      {
        "text": "I have 6.0 IELTS, 3.5 GPA, interested in Engineering"
      }
    ]
  }],
  "generationConfig": {
    "temperature": 0.7,
    "topK": 40,
    "topP": 0.95,
    "maxOutputTokens": 1024
  }
}
```

### Response
```json
{
  "candidates": [{
    "content": {
      "parts": [{
        "text": "Based on your profile, I recommend:\n\n1. **KBTU** - Excellent engineering..."
      }]
    }
  }]
}
```

---

## ğŸ’¾ State Management

```
Component State:
â”œâ”€ isOpen: false â†’ true (when user clicks button)
â”œâ”€ messages: [initial AI message, ...user/AI messages]
â”œâ”€ input: "I have 6.0 IELTS..." (user typing)
â”œâ”€ loading: false â†’ true (during API call)
â””â”€ error: "" â†’ "error message" (if API fails)

No Persistence:
â”œâ”€ Not saved to localStorage
â”œâ”€ Not sent to backend
â”œâ”€ Lost on page reload
â”œâ”€ Lost on browser close
â””â”€ Only persists during session
```

---

## ğŸ¨ Styling

```
Colors:
â”œâ”€ Button Gradient: blue-500 â†’ purple-600
â”œâ”€ Header Gradient: blue-500 â†’ purple-600
â”œâ”€ User Messages: blue-500 (bg), white (text)
â”œâ”€ AI Messages: slate-200 (light) / slate-700 (dark)
â””â”€ Dark Mode: Supported with dark: prefix

Spacing:
â”œâ”€ Button: Fixed bottom-6 left-6 (corners from viewport)
â”œâ”€ Panel: Fixed bottom-24 left-6 (above button)
â”œâ”€ Size: w-96 (384px wide) Ã— h-[600px] (600px tall)
â””â”€ Message Padding: p-4

Fonts:
â”œâ”€ Header: Bold, white text
â”œâ”€ Messages: Regular, inherited color
â””â”€ Placeholder: Muted foreground color
```

---

## ğŸ“± Responsive Behavior

```
Desktop (â‰¥768px):
â”œâ”€ Chat panel: 384px wide, 600px tall
â”œâ”€ Floating button: 56px diameter
â””â”€ Visible and fully functional

Tablet (480-768px):
â”œâ”€ Chat panel: 384px wide (might overlap)
â”œâ”€ Floating button: 56px diameter
â””â”€ Scrollable if needed

Mobile (<480px):
â”œâ”€ Chat panel: 384px wide (might overflow)
â”œâ”€ Consider viewport width
â”œâ”€ Scrollable content
â””â”€ Floating button: 56px diameter
```

---

## âš™ï¸ Configuration

```
.env File
â”œâ”€ VITE_GEMINI_API_KEY=your_key_here
â””â”€ Loaded by Vite build system

import.meta.env
â”œâ”€ Accessed in component as: import.meta.env.VITE_GEMINI_API_KEY
â””â”€ Available at runtime

Build Process
â”œâ”€ .env values injected at build time
â”œâ”€ Available in browser console if needed
â””â”€ Consider security in production
```

---

This diagram provides a complete visual overview of how the AI Chat Widget works!
